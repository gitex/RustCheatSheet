## –ß—Ç–æ —Ç–∞–∫–æ–µ Cell<T>

`Cell<T>` ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–∞—è –æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è —Ç–∏–ø–æ–≤ —Å Copy, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç 
–≤—ã–ø–æ–ª–Ω—è—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ), 
–¥–∞–∂–µ –µ—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –Ω–µ–∏–∑–º–µ–Ω—è–µ–º–∞—è —Å—Å—ã–ª–∫–∞ (`&Cell<T>`).
- –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç `RefCell<T>`, `Cell<T>` –Ω–µ –¥–∞—ë—Ç —Å—Å—ã–ª–æ–∫ –Ω–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, –∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∑–∞–º–µ–Ω—É.
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `u32`, `bool`, `Copy`-—Ç–∏–ø—ã).

## üß© –ó–∞—á–µ–º –Ω—É–∂–µ–Ω Cell<T>
- –ß—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, –¥–∞–∂–µ –µ—Å–ª–∏ —É –≤–∞—Å —Ç–æ–ª—å–∫–æ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä.
- –£–¥–æ–±–Ω–æ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –º–µ–Ω—è–µ—Ç—Å—è, –Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö —Å—Å—ã–ª–æ–∫.
- –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ runtime-borrow-—á–µ–∫–µ—Ä–∞, –∞ –∑–Ω–∞—á–∏—Ç ‚Äî –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–π, –∏ –Ω–µ—Ç panic.

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥                           | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                      |
| ------------------------------- | ----------------------------------------------- |
| `new(value: T)`                 | –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –Ω–∞—á–∞–ª—å–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º   |
| `get(&self) -> T`               | –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–∫–æ–ø–∏—Ä—É–µ—Ç)            |
| `set(&self, value: T)`          | –ó–∞–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ –Ω–æ–≤–æ–µ                      |
| `replace(&self, value: T) -> T` | –ó–∞–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ä–æ–µ            |
| `into_inner(self) -> T`         | –ò–∑–≤–ª–µ–∫–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ—Ç—Ä–µ–±–ª—è—è `Cell` |

## ‚öôÔ∏è –û—Ç–ª–∏—á–∏–µ –æ—Ç RefCell<T>

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞        | `Cell<T>`                              | `RefCell<T>`                             |
| --------------------- | -------------------------------------- | ---------------------------------------- |
| –ü—Ä–æ–≤–µ—Ä–∫–∞ borrow       | ‚ùå –ù–µ—Ç                                  | ‚úÖ –î–∞ (runtime)                           |
| –í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–ø–∏—è –∏–ª–∏ –∑–∞–º–µ–Ω–∞ –∑–Ω–∞—á–µ–Ω–∏—è (–±–µ–∑ —Å—Å—ã–ª–æ–∫) | –°—Å—ã–ª–∫–∏ (`Ref<T>`, `RefMut<T>`)           |
| –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è          | `Copy`-—Ç–∏–ø—ã                            | –°–ª–æ–∂–Ω—ã–µ —Ç–∏–ø—ã –±–µ–∑ `Copy`                  |
| –ü–∞–Ω–∏–∫–∏                | ‚ùå –ù–µ—Ç                                  | ‚úÖ –ú–æ–∂–µ—Ç panic –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º borrowing |

## üîß –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Cell<T>

````rust
use std::cell::Cell;

fn main() {
    let c = Cell::new(5);

    let x = c.get();   // –ü–æ–ª—É—á–∞–µ–º –∫–æ–ø–∏—é –∑–Ω–∞—á–µ–Ω–∏—è (5)
    c.set(10);         // –ó–∞–º–µ–Ω—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ 10
    let old = c.replace(15); // –ó–∞–º–µ–Ω—è–µ–º –Ω–∞ 15, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä–æ–µ (10)

    println!("x = {}, old = {}, current = {}", x, old, c.get());  // x = 5, old = 10, current = 15
}
````

## üß∞ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Cell<T> –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º

- –•—Ä–∞–Ω–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–∏–ø–∞ T.
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî –ø—Ä—è–º–æ –º–µ–Ω—è—é—Ç –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ–ø–∏—é –∑–Ω–∞—á–µ–Ω–∏—è.
- –ù–µ –¥–∞—ë—Ç –Ω–∏–∫–∞–∫–∏—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ.

## üìú –ü—Å–µ–≤–¥–æ–∫–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Cell<T>

````
class Cell<T> {
    private value: T

    constructor(value: T) {
        this.value = value
    }

    function get() -> T {
        return copy_of(value) // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–æ–ø–∏—é –∑–Ω–∞—á–µ–Ω–∏—è
    }

    function set(new_value: T) {
        this.value = new_value // –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ–Ω—è–µ–º
    }

    function replace(new_value: T) -> T {
        old_value = this.value
        this.value = new_value
        return old_value // –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Å—Ç–∞—Ä–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
    }
}
````

