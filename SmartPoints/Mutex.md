## –ß—Ç–æ —Ç–∞–∫–æ–µ Mutex<T>

`Mutex<T>` ‚Äî —ç—Ç–æ –º—å—é—Ç–µ–∫—Å (mutual exclusion), –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–π –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–∑–∞–∏–º–Ω–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –≤ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.
- –û–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –≤–Ω—É—Ç—Ä–∏ –º—å—é—Ç–µ–∫—Å–∞.
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —É—Å–ª–æ–≤–∏—è—Ö –∫–æ–Ω–∫—É—Ä–µ–Ω—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤.
- –í Rust ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ (std::sync::Mutex).

## üîç –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω Mutex<T>

- –í–Ω—É—Ç—Ä–∏ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ —Ç–∏–ø–∞ T.
- –•—Ä–∞–Ω–∏—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É (lock), –ø–æ–∑–≤–æ–ª—è—é—â—É—é –æ–¥–Ω–æ–º—É –ø–æ—Ç–æ–∫—É "–∑–∞—Ö–≤–∞—Ç–∏—Ç—å" –¥–æ—Å—Ç—É–ø.
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É ‚Äî –æ–∂–∏–¥–∞—é—Ç (–±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è) –¥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è.

## üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

| –ú–µ—Ç–æ–¥                                             | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                                   |
| ------------------------------------------------- | ------------------------------------------------------------ |
| `new(value: T) -> Mutex<T>`                       | –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –º—å—é—Ç–µ–∫—Å —Å –¥–∞–Ω–Ω—ã–º–∏ `value`                      |
| `lock(&self) -> LockResult<MutexGuard<T>>`        | –ó–∞—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É, –≤–æ–∑–≤—Ä–∞—â–∞—è "—Å—Ç—Ä–∞–∂–∞" ‚Äî –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º |
| `try_lock(&self) -> TryLockResult<MutexGuard<T>>` | –ü—ã—Ç–∞–µ—Ç—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è                   |


## üîë –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Mutex

````rust
use std::sync::Mutex;

fn main() {
    let m = Mutex::new(0);

    {
        let mut num = m.lock().unwrap();  // –∑–∞—Ö–≤–∞—Ç—ã–≤–∞–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–∫—É
        *num += 1;                        // –∏–∑–º–µ–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
    } // –∑–¥–µ—Å—å MutexGuard –æ—Ç–ø—É—Å–∫–∞–µ—Ç—Å—è, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è

    println!("{}", m.lock().unwrap());  // 1
}
````

## üß† –ß—Ç–æ —Ç–∞–∫–æ–µ MutexGuard
- –¢–∏–ø `MutexGuard<T>` ‚Äî —ç—Ç–æ —É–º–Ω—ã–π —É–∫–∞–∑–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º –≤–Ω—É—Ç—Ä–∏ –º—å—é—Ç–µ–∫—Å–∞.
- –û–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ (`Drop`).
- –ü–æ–∫–∞ `MutexGuard` –∂–∏–≤ ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.

## üîß –ü—Ä–∏–º–µ—Ä —Å –ø–æ—Ç–æ–∫–∞–º–∏
````rust
use std::sync::{Arc, Mutex};
use std::thread;

fn main() {
    let counter = Arc::new(Mutex::new(0));
    let mut handles = vec![];

    for _ in 0..10 {
        let counter = Arc::clone(&counter);
        let handle = thread::spawn(move || {
            let mut num = counter.lock().unwrap();
            *num += 1;
        });
        handles.push(handle);
    }

    for handle in handles {
        handle.join().unwrap();
    }

    println!("{}", *counter.lock().unwrap());  // 10
}
````

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º (—É–ø—Ä–æ—â—ë–Ω–Ω–æ)
- `Mutex` –æ–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –û–° (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é `pthread_mutex` –≤ Linux).
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `lock()` –ø–æ—Ç–æ–∫ –ª–∏–±–æ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º, –ª–∏–±–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (–∂–¥–µ—Ç).
- –ü—Ä–∏ –≤—ã–∑–æ–≤–µ `unlock()` –¥—Ä—É–≥–æ–π –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø.


